(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{mpk1:function(t,e,a){"use strict";a.r(e),a.d(e,"RoomModule",(function(){return ut}));var c=a("SVse"),o=a("iInd"),r=a("OaSA"),i=a("LUZP"),n=a("5QHs"),s=a("zafk"),l=a("8Y7J"),b=a("yWY+"),m=a("iELJ"),d=a("VDRc"),u=a("Q2Ze"),f=a("e6WT"),p=a("Dxy4"),h=a("Tj54"),g=a("TSSN");function S(t,e){1&t&&(l.Sb(0,"th",22),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Name")))}function R(t,e){if(1&t&&(l.Sb(0,"td",23),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.name," ")}}function B(t,e){1&t&&(l.Sb(0,"th",24),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Room.Capacity")))}function v(t,e){if(1&t&&(l.Sb(0,"td",23),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.capacity," ")}}function C(t,e){1&t&&(l.Sb(0,"th",25),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Room.Street")))}function y(t,e){if(1&t&&(l.Sb(0,"td",23),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.street," ")}}function w(t,e){1&t&&(l.Sb(0,"th",26),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Event.Actions")))}function x(t,e){if(1&t){const t=l.Tb();l.Sb(0,"td",23),l.Sb(1,"button",27),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToDetails(a._id)})),l.Sb(2,"mat-icon",28),l.fc(3,"translate"),l.Bc(4,"visibility"),l.Rb(),l.Rb(),l.Sb(5,"button",29),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().delete(a._id)})),l.Sb(6,"mat-icon",28),l.fc(7,"translate"),l.Bc(8,"delete"),l.Rb(),l.Rb(),l.Sb(9,"button",27),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToStats(a._id)})),l.Sb(10,"mat-icon",30),l.fc(11,"translate"),l.Bc(12,"query_stats"),l.Rb(),l.Rb(),l.Rb()}2&t&&(l.Bb(2),l.kc("title",l.gc(3,3,"Details")),l.Bb(4),l.kc("title",l.gc(7,5,"Delete")),l.Bb(4),l.kc("title",l.gc(11,7,"Seats.Status")))}function D(t,e){1&t&&l.Nb(0,"th",31)}function k(t,e){if(1&t){const t=l.Tb();l.Sb(0,"td",23),l.Sb(1,"button",32),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToStatus(a._id)})),l.Bc(2," Ver sus eventos "),l.Rb(),l.Rb()}}function _(t,e){1&t&&l.Nb(0,"tr",33)}function A(t,e){1&t&&l.Nb(0,"tr",34)}const E=function(){return[2,4,6,10,20]};let N=(()=>{class t{constructor(t,e,a){this.roomService=t,this.router=e,this.dialog=a,this.displayedColumns=["name","capacity","street","actions","viewEvents"],this.dataSource=new r.k,this.doFilter=t=>{this.dataSource.filter=t.target.value.trim().toLocaleLowerCase()},this.redirectToDetails=t=>{this.router.navigate([`/room/${t}/details`]).then(()=>console.log("redirect to room details"))},this.redirectToStatus=t=>{this.router.navigate([`/room/${t}/status`]).then(()=>console.log("redirect to room status"))},this.redirectToStats=t=>{this.router.navigate([`/room/${t}/stats`]).then(()=>console.log("redirect to room status"))}}ngOnInit(){this.fetchData()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}fetchData(){this.roomService.getAll().subscribe(t=>{this.rooms=t,this.dataSource.data=t},t=>{console.error("Ha habido un error al hacer get de eventos",t)})}delete(t){this.dialog.open(s.a).afterClosed().subscribe(e=>{e&&this.roomService.getEvents(t).subscribe(e=>{0===e.length?this.roomService.delete(t).subscribe(()=>{console.log("Evento con id: "+t+" borrado"),this.fetchData(),alert('\xa1La sala "'+t.split("_")[0]+'" se borro correctamente!')},t=>{console.error("Ha habido un error al hacer delete del evento",t)}):alert("Esta sala no se puede eliminar, contiene eventos")},t=>{console.error("Ha habido un error al hacer get de eventos de una sala",t)})})}onSelect(t){this.selectedRoom=t}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(b.a),l.Mb(o.b),l.Mb(m.b))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-room"]],viewQuery:function(t,e){var a;1&t&&(l.Hc(i.a,!0),l.Hc(n.a,!0)),2&t&&(l.pc(a=l.bc())&&(e.sort=a.first),l.pc(a=l.bc())&&(e.paginator=a.first))},decls:32,vars:15,consts:[[1,"my-main-page-module"],["id","my-title-page-module"],[1,"my-table-page-module"],["fxLayout","","fxLayout.lt-md","column wrap","fxLayoutAlign","center center","fxLayoutGap.gt-sm","250px","fxLayoutGap.lt-md","20px"],["fxFlex","40%"],["matInput","","type","text",3,"placeholder","keyup"],["routerLink","new","mat-button","","color","primary",2,"font-size","15px"],["id","my-table-page-module-data-source","mat-table","","matSort","","matSortStart","desc","aria-describedby","event",3,"dataSource"],["matColumnDef","name"],["id","name","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","capacity"],["id","capacity","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","street"],["id","street","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","actions"],["id","actions","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","viewEvents"],["id","viewEvents","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["id","name","mat-header-cell","","mat-sort-header",""],["mat-cell",""],["id","capacity","mat-header-cell","","mat-sort-header",""],["id","street","mat-header-cell","","mat-sort-header",""],["id","actions","mat-header-cell",""],["mat-icon-button","","color","primary",3,"click"],[1,"mat-18",3,"title"],["mat-icon-button","","color","warn",3,"click"],["color","accent",3,"title"],["id","viewEvents","mat-header-cell","","mat-sort-header",""],["mat-button","","color","primary",2,"font-size","13px",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"p",1),l.Bc(2),l.fc(3,"translate"),l.Rb(),l.Sb(4,"div",2),l.Sb(5,"div",3),l.Sb(6,"mat-form-field",4),l.Sb(7,"label"),l.Sb(8,"input",5),l.ac("keyup",(function(t){return e.doFilter(t)})),l.fc(9,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Sb(10,"a",6),l.Bc(11),l.fc(12,"translate"),l.Rb(),l.Rb(),l.Sb(13,"table",7),l.Qb(14,8),l.Ac(15,S,3,3,"th",9),l.Ac(16,R,2,1,"td",10),l.Pb(),l.Qb(17,11),l.Ac(18,B,3,3,"th",12),l.Ac(19,v,2,1,"td",10),l.Pb(),l.Qb(20,13),l.Ac(21,C,3,3,"th",14),l.Ac(22,y,2,1,"td",10),l.Pb(),l.Qb(23,15),l.Ac(24,w,3,3,"th",16),l.Ac(25,x,13,9,"td",10),l.Pb(),l.Qb(26,17),l.Ac(27,D,1,0,"th",18),l.Ac(28,k,3,0,"td",10),l.Pb(),l.Ac(29,_,1,0,"tr",19),l.Ac(30,A,1,0,"tr",20),l.Rb(),l.Nb(31,"mat-paginator",21),l.Rb(),l.Rb()),2&t&&(l.Bb(2),l.Cc(l.gc(3,8,"Room.Mine")),l.Bb(6),l.kc("placeholder",l.gc(9,10,"Filter")),l.Bb(3),l.Cc(l.gc(12,12,"Room.Create")),l.Bb(2),l.jc("dataSource",e.dataSource),l.Bb(16),l.jc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.jc("matRowDefColumns",e.displayedColumns),l.Bb(1),l.jc("pageSize",10)("pageSizeOptions",l.mc(14,E)))},directives:[d.c,d.b,d.d,u.c,d.a,f.b,o.e,p.a,r.j,i.a,r.c,r.e,r.b,r.g,r.i,n.a,r.d,i.b,r.a,p.b,h.a,r.f,r.h],pipes:[g.c],styles:[""]}),t})();var I=a("s7LF"),L=a("n90K"),M=a("PDjf");function H(t,e){1&t&&(l.Sb(0,"mat-error"),l.Bc(1),l.fc(2,"translate"),l.fc(3,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Ec(" ",l.gc(2,2,"Room.Name"),"",l.gc(3,4,"Error.Req")," "))}function O(t,e){1&t&&(l.Sb(0,"mat-error"),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Error.MoreThan60Char")))}function T(t,e){1&t&&(l.Sb(0,"mat-error"),l.Bc(1),l.fc(2,"translate"),l.fc(3,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Ec(" ",l.gc(2,2,"Room.Street"),"",l.gc(3,4,"Error.Req")," "))}function P(t,e){1&t&&(l.Sb(0,"mat-error"),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Dc(" ",l.gc(2,1,"Error.Required")," "))}function j(t,e){1&t&&(l.Sb(0,"mat-error"),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Dc(" ",l.gc(2,1,"Error.Required")," "))}function $(t,e){1&t&&(l.Sb(0,"mat-error"),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Dc(" ",l.gc(2,1,"Error.Required")," "))}let F=(()=>{class t{constructor(t,e,a,c,o){this.activatedRoute=t,this.roomService=e,this.route=a,this.fb=c,this.storageService=o,this.titleForm="Room.Create",this.hasError=(t,e)=>this.formRoom.controls[t].hasError(e),this.formRoom=this.fb.group({name:new I.f("",I.r.compose([I.r.required,I.r.maxLength(60)])),street:new I.f("",[I.r.required]),capacity:new I.f("",[I.r.required]),rows:new I.f("",[I.r.required]),columns:new I.f(null,[I.r.required]),distance_between_seats:new I.f(.2),seats_size:new I.f(.7)})}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.roomId=t.id,this.roomId&&this.roomService.get(this.roomId).subscribe(t=>{this.updateForm(t=t[0]),this.titleForm="Room.Update"})})}onSubmit(t){this.room={_id:this.roomId?this.roomId:t.name+"_"+this.storageService.getCurrentUser().id,id_manager:this.storageService.getCurrentUser().id,name:t.name,street:t.street,capacity:t.capacity,rows:t.rows,columns:t.columns,distance_between_seats:t.distance_between_seats,seats_size:t.seats_size},this.roomService.create(this.room).subscribe(()=>{this.route.navigate(["/room"]).then(()=>console.log("Go to room"))},t=>{console.error("Ha habido un error al hacer create de room",t)})}updateForm(t){this.formRoom.patchValue(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(o.a),l.Mb(b.a),l.Mb(o.b),l.Mb(I.e),l.Mb(L.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-room-update"]],decls:70,vars:53,consts:[["fxLayout","row wrap","fxLayoutAlign","center",1,"my-main-page-module"],["fxFlex","530px","fxFlex.xs","100%"],["autocomplete","off","novalidate","","fxLayout","column wrap","fxLayoutAlign","center center","fxLayoutGap","10px",3,"formGroup","ngSubmit"],["appearance","fill"],["for","name"],["matInput","","type","text","formControlName","name","id","name"],["align","end"],[4,"ngIf"],["for","street"],["matInput","","type","text","formControlName","street","id","street"],["for","capacity"],["matInput","","type","number","formControlName","capacity","id","capacity",3,"placeholder"],["for","rows"],["matInput","","type","number","formControlName","rows","id","rows",3,"placeholder"],["appearance","fill",1,"form-40-input"],["for","columns"],["matInput","","type","number","formControlName","columns","id","columns",3,"placeholder"],["for","distance_between_seats"],["matInput","","type","number","formControlName","distance_between_seats","id","distance_between_seats",3,"placeholder"],["for","seats_size"],["matInput","","type","number","formControlName","seats_size","id","seats_size"],["mat-stroked-button","","color","accent","routerLink","/room",1,"btn-block"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(l.Sb(0,"section",0),l.Sb(1,"mat-card",1),l.Sb(2,"mat-card-title"),l.Bc(3),l.fc(4,"translate"),l.Rb(),l.Sb(5,"form",2),l.ac("ngSubmit",(function(){return e.onSubmit(e.formRoom.value)})),l.Sb(6,"mat-card-content"),l.Sb(7,"mat-form-field",3),l.Sb(8,"mat-label",4),l.Bc(9),l.fc(10,"translate"),l.Rb(),l.Nb(11,"label",4),l.Nb(12,"input",5),l.Sb(13,"mat-hint",6),l.Bc(14),l.fc(15,"translate"),l.Rb(),l.Ac(16,H,4,6,"mat-error",7),l.Ac(17,O,3,3,"mat-error",7),l.Rb(),l.Sb(18,"mat-form-field",3),l.Sb(19,"mat-label"),l.Bc(20),l.fc(21,"translate"),l.Rb(),l.Nb(22,"label",8),l.Nb(23,"input",9),l.Ac(24,T,4,6,"mat-error",7),l.Rb(),l.Sb(25,"mat-form-field",3),l.Sb(26,"mat-label"),l.Bc(27),l.fc(28,"translate"),l.Rb(),l.Nb(29,"label",10),l.Nb(30,"input",11),l.fc(31,"translate"),l.Ac(32,P,3,3,"mat-error",7),l.Rb(),l.Sb(33,"mat-form-field",3),l.Sb(34,"mat-label"),l.Bc(35),l.fc(36,"translate"),l.Rb(),l.Nb(37,"label",12),l.Nb(38,"input",13),l.fc(39,"translate"),l.Ac(40,j,3,3,"mat-error",7),l.Rb(),l.Sb(41,"mat-form-field",14),l.Sb(42,"mat-label"),l.Bc(43),l.fc(44,"translate"),l.Rb(),l.Nb(45,"label",15),l.Nb(46,"input",16),l.fc(47,"translate"),l.Ac(48,$,3,3,"mat-error",7),l.Rb(),l.Nb(49,"tr"),l.Sb(50,"mat-form-field",14),l.Sb(51,"mat-label"),l.Bc(52),l.fc(53,"translate"),l.Rb(),l.Nb(54,"label",17),l.Nb(55,"input",18),l.fc(56,"translate"),l.Rb(),l.Sb(57,"mat-form-field",3),l.Sb(58,"mat-label"),l.Bc(59),l.fc(60,"translate"),l.Rb(),l.Nb(61,"label",19),l.Nb(62,"input",20),l.Rb(),l.Rb(),l.Sb(63,"mat-card-actions"),l.Sb(64,"button",21),l.Bc(65),l.fc(66,"translate"),l.Rb(),l.Sb(67,"button",22),l.Bc(68),l.fc(69,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Bb(3),l.Dc(" ",l.gc(4,23,e.titleForm)," "),l.Bb(2),l.jc("formGroup",e.formRoom),l.Bb(4),l.Cc(l.gc(10,25,"Room.Name")),l.Bb(5),l.Dc("",l.gc(15,27,"Error.MoreThan60Char"),"."),l.Bb(2),l.jc("ngIf",e.hasError("name","required")),l.Bb(1),l.jc("ngIf",e.hasError("name","maxlength")),l.Bb(3),l.Cc(l.gc(21,29,"Room.Street")),l.Bb(4),l.jc("ngIf",e.hasError("street","required")),l.Bb(3),l.Cc(l.gc(28,31,"Room.Capacity")),l.Bb(3),l.kc("placeholder",l.gc(31,33,"Room.MaxCapacity")),l.Bb(2),l.jc("ngIf",e.hasError("capacity","required")),l.Bb(3),l.Cc(l.gc(36,35,"Room.Rows")),l.Bb(3),l.kc("placeholder",l.gc(39,37,"Room.NumberOfRows")),l.Bb(2),l.jc("ngIf",e.hasError("rows","required")),l.Bb(3),l.Cc(l.gc(44,39,"Room.Columns")),l.Bb(3),l.kc("placeholder",l.gc(47,41,"Room.NumberOfColumns")),l.Bb(2),l.jc("ngIf",e.hasError("columns","required")),l.Bb(4),l.Cc(l.gc(53,43,"Room.Distance")),l.Bb(3),l.kc("placeholder",l.gc(56,45,"Room.Distance")),l.Bb(4),l.Cc(l.gc(60,47,"Room.SeatsSize")),l.Bb(6),l.Dc(" ",l.gc(66,49,"Back")," "),l.Bb(2),l.jc("disabled",!e.formRoom.valid),l.Bb(1),l.Cc(l.gc(69,51,"Save")))},directives:[d.c,d.b,M.a,d.a,M.i,I.s,I.n,d.d,I.h,M.c,u.c,u.g,f.b,I.c,I.m,I.g,u.f,c.l,I.p,M.b,p.b,o.c,u.b],pipes:[g.c],styles:["mat-card[_ngcontent-%COMP%]{opacity:.96;min-width:500px;max-height:810px}mat-card-title[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}mat-card-content[_ngcontent-%COMP%]{margin-top:10px;margin-left:30px;margin-right:30px}.form-40-input[_ngcontent-%COMP%]{width:50%}.btn-block[_ngcontent-%COMP%]{top:10px;right:145px}.mat-raised-button[_ngcontent-%COMP%]{top:10px;left:150px}"]}),t})();var z=a("SqCe"),q=a("BSbQ");function Q(t,e){if(1&t){const t=l.Tb();l.Sb(0,"div"),l.Sb(1,"mat-list"),l.Sb(2,"mat-card-title",3),l.Bc(3),l.fc(4,"uppercase"),l.Rb(),l.Sb(5,"mat-card-subtitle",3),l.Bc(6),l.fc(7,"translate"),l.Rb(),l.Nb(8,"mat-divider"),l.Sb(9,"mat-list-item"),l.Bc(10),l.fc(11,"translate"),l.Rb(),l.Nb(12,"mat-divider"),l.Sb(13,"mat-list-item"),l.Bc(14),l.fc(15,"translate"),l.Rb(),l.Nb(16,"mat-divider"),l.Sb(17,"mat-list-item"),l.Bc(18),l.fc(19,"translate"),l.Rb(),l.Nb(20,"mat-divider"),l.Sb(21,"mat-list-item"),l.Bc(22),l.fc(23,"translate"),l.Rb(),l.Nb(24,"mat-divider"),l.Sb(25,"mat-list-item"),l.Bc(26),l.fc(27,"translate"),l.Rb(),l.Nb(28,"mat-divider"),l.Sb(29,"mat-list-item"),l.Bc(30),l.fc(31,"translate"),l.Rb(),l.Nb(32,"mat-divider"),l.Sb(33,"mat-list-item"),l.Bc(34),l.fc(35,"translate"),l.Rb(),l.Nb(36,"mat-divider"),l.Sb(37,"button",4),l.ac("click",(function(){return l.sc(t),l.ec().goBack()})),l.Bc(38),l.fc(39,"translate"),l.Rb(),l.Rb(),l.Rb()}if(2&t){const t=l.ec();l.Bb(3),l.Cc(l.gc(4,17,t.room.name)),l.Bb(3),l.Cc(l.gc(7,19,"Details")),l.Bb(4),l.Ec("",l.gc(11,21,"Room.Name"),": ",t.room.name,""),l.Bb(4),l.Ec("",l.gc(15,23,"Room.Street"),": ",t.room.street,""),l.Bb(4),l.Ec("",l.gc(19,25,"Room.Capacity"),": ",t.room.capacity,""),l.Bb(4),l.Ec("",l.gc(23,27,"Room.Rows"),": ",t.room.rows,""),l.Bb(4),l.Ec("",l.gc(27,29,"Room.Columns"),": ",t.room.columns,""),l.Bb(4),l.Ec("",l.gc(31,31,"Room.Distance"),": ",t.room.distance_between_seats,""),l.Bb(4),l.Ec("",l.gc(35,33,"Room.SeatsSize"),": ",t.room.seats_size,""),l.Bb(4),l.Dc(" ",l.gc(39,35,"Back")," ")}}let G=(()=>{class t{constructor(t,e,a){this.roomService=t,this.activatedRoute=e,this._location=a}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.roomId=t.id,this.roomService.get(this.roomId).subscribe(t=>{this.room=t[0]})})}goBack(){this._location.back()}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(b.a),l.Mb(o.a),l.Mb(c.h))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-room-detail"]],decls:3,vars:1,consts:[["fxLayout","row wrap","fxLayoutAlign","center",1,"my-main-page-module"],["fxFlex","530px","fxFlex.xs","100%"],[4,"ngIf"],["fxLayoutAlign","center center"],["mat-stroked-button","","color","accent",1,"btn-block",3,"click"]],template:function(t,e){1&t&&(l.Sb(0,"section",0),l.Sb(1,"mat-card",1),l.Ac(2,Q,40,37,"div",2),l.Rb(),l.Rb()),2&t&&(l.Bb(2),l.jc("ngIf",e.room))},directives:[d.c,d.b,M.a,d.a,c.l,z.a,M.i,M.h,q.a,z.b,p.b],pipes:[c.s,g.c],styles:["mat-card[_ngcontent-%COMP%]{opacity:.96;min-width:500px;max-height:570px}mat-card-title[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:20px}mat-divider[_ngcontent-%COMP%]{margin-left:20px;max-width:480px}.btn-block[_ngcontent-%COMP%]{padding:0 20px;margin-top:35px;margin-left:43%}"]}),t})();var J=a("fTLw");function U(t,e){1&t&&(l.Sb(0,"th",25),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Name")))}function V(t,e){if(1&t&&(l.Sb(0,"td",26),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.name," ")}}function W(t,e){1&t&&(l.Sb(0,"th",27),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Event.Date")))}function K(t,e){if(1&t&&(l.Sb(0,"td",26),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.date," ")}}function Z(t,e){1&t&&(l.Sb(0,"th",28),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Event.StartAt")))}function Y(t,e){if(1&t&&(l.Sb(0,"td",26),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.hourIni," ")}}function X(t,e){1&t&&(l.Sb(0,"th",29),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Event.EndAt")))}function tt(t,e){if(1&t&&(l.Sb(0,"td",26),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Dc(" ",t.hourEnd," ")}}function et(t,e){1&t&&(l.Sb(0,"th",30),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Seats.Occupation")))}function at(t,e){if(1&t&&(l.Sb(0,"td",26),l.Bc(1),l.Rb()),2&t){const t=e.$implicit;l.Bb(1),l.Ec(" ",t.occupation,"/",t.capacity," ")}}function ct(t,e){1&t&&(l.Sb(0,"th",31),l.Bc(1),l.fc(2,"translate"),l.Rb()),2&t&&(l.Bb(1),l.Cc(l.gc(2,1,"Event.Actions")))}function ot(t,e){if(1&t){const t=l.Tb();l.Sb(0,"td",26),l.Sb(1,"button",32),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToDetails(a._id)})),l.Sb(2,"mat-icon",33),l.fc(3,"translate"),l.Bc(4,"visibility"),l.Rb(),l.Rb(),l.Sb(5,"button",34),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToUpdate(a._id)})),l.Sb(6,"mat-icon",33),l.fc(7,"translate"),l.Bc(8,"edit"),l.Rb(),l.Rb(),l.Sb(9,"button",35),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().delete(a._id)})),l.Sb(10,"mat-icon",33),l.fc(11,"translate"),l.Bc(12,"delete"),l.Rb(),l.Rb(),l.Sb(13,"button",32),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToStatus(a._id)})),l.Sb(14,"mat-icon",36),l.fc(15,"translate"),l.Bc(16,"event_seat"),l.Rb(),l.Rb(),l.Sb(17,"button",32),l.ac("click",(function(){l.sc(t);const a=e.$implicit;return l.ec().redirectToStats(a._id)})),l.Sb(18,"mat-icon",37),l.fc(19,"translate"),l.Bc(20,"query_stats"),l.Rb(),l.Rb(),l.Rb()}2&t&&(l.Bb(2),l.kc("title",l.gc(3,5,"Details")),l.Bb(4),l.kc("title",l.gc(7,7,"Edit")),l.Bb(4),l.kc("title",l.gc(11,9,"Delete")),l.Bb(4),l.kc("title",l.gc(15,11,"Seats.Status")),l.Bb(4),l.kc("title",l.gc(19,13,"Seats.Stats")))}function rt(t,e){1&t&&l.Nb(0,"tr",38)}function it(t,e){1&t&&l.Nb(0,"tr",39)}const nt=function(){return[2,4,6,10,20]};let st=(()=>{class t{constructor(t,e,a,c,o){this.roomService=t,this.activatedRoute=e,this.eventService=a,this.router=c,this.dialog=o,this.displayedColumns=["name","date","hourIni","hourEnd","occupation","actions"],this.dataSource=new r.k,this.doFilter=t=>{this.dataSource.filter=t.target.value.trim().toLocaleLowerCase()},this.redirectToDetails=t=>{this.router.navigate([`/event/${t}/details`]).then(()=>console.log("redirect to event details"))},this.redirectToUpdate=t=>{this.router.navigate([`/event/${t}/update`]).then(()=>console.log("redirect to event update"))},this.redirectToStatus=t=>{this.router.navigate([`/event/${t}/status`]).then(()=>console.log("redirect to event status"))},this.redirectToStats=t=>{this.router.navigate([`/event/${t}/stats`]).then(()=>console.log("redirect to event status"))}}ngOnInit(){this.fetchData()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}fetchData(){this.activatedRoute.params.subscribe(t=>{this.roomId=t.id,this.roomService.getEvents(this.roomId).subscribe(t=>{let e;this.events=t;for(const a of this.events)e=a.seats.split("\t").length-1+(a.seats.split("\n").length-1)+1,a.occupation=e-(a.seats.split("T").length-1),a.capacity=e;this.dataSource.data=this.events},t=>{console.error("Ha habido un error al hacer get de eventos de una sala",t)})})}delete(t){this.dialog.open(s.a).afterClosed().subscribe(e=>{e&&this.eventService.delete(t).subscribe(()=>{console.log("Evento con id: "+t+" borrado"),this.fetchData()},t=>{console.error("Ha habido un error al hacer delete del evento",t)})})}onSelect(t){this.selectedEvent=t}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(b.a),l.Mb(o.a),l.Mb(J.a),l.Mb(o.b),l.Mb(m.b))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-room-status"]],viewQuery:function(t,e){var a;1&t&&(l.Hc(i.a,!0),l.Hc(n.a,!0)),2&t&&(l.pc(a=l.bc())&&(e.sort=a.first),l.pc(a=l.bc())&&(e.paginator=a.first))},decls:36,vars:16,consts:[[1,"my-main-page-module"],["id","my-title-page-module"],[1,"my-table-page-module"],["fxLayout","","fxLayout.lt-md","column wrap","fxLayoutAlign","center center","fxLayoutGap.gt-sm","250px","fxLayoutGap.lt-md","20px"],["fxFlex","50%"],["matInput","","type","text",3,"placeholder","keyup"],["id","my-table-page-module-data-source","mat-table","","matSort","","matSortStart","desc","aria-describedby","date",3,"dataSource"],["matColumnDef","name"],["id","name","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["id","date","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","hourIni"],["id","start-at","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","hourEnd"],["id","ends-at","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","occupation"],["id","occupation","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","actions"],["id","actions","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"margin-top","40px","margin-left","5px"],["mat-stroked-button","","color","accent","routerLink","/room"],[2,"margin-top","0px",3,"pageSize","pageSizeOptions"],["id","name","mat-header-cell","","mat-sort-header",""],["mat-cell",""],["id","date","mat-header-cell","","mat-sort-header",""],["id","start-at","mat-header-cell","","mat-sort-header",""],["id","ends-at","mat-header-cell","","mat-sort-header",""],["id","occupation","mat-header-cell","","mat-sort-header",""],["id","actions","mat-header-cell",""],["mat-icon-button","","color","primary",3,"click"],[1,"mat-18",3,"title"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],[2,"color","darkgreen",3,"title"],["color","accent",3,"title"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"p",1),l.Bc(2),l.fc(3,"translate"),l.Rb(),l.Sb(4,"div",2),l.Sb(5,"div",3),l.Sb(6,"mat-form-field",4),l.Sb(7,"label"),l.Sb(8,"input",5),l.ac("keyup",(function(t){return e.doFilter(t)})),l.fc(9,"translate"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(10,"table",6),l.Qb(11,7),l.Ac(12,U,3,3,"th",8),l.Ac(13,V,2,1,"td",9),l.Pb(),l.Qb(14,10),l.Ac(15,W,3,3,"th",11),l.Ac(16,K,2,1,"td",9),l.Pb(),l.Qb(17,12),l.Ac(18,Z,3,3,"th",13),l.Ac(19,Y,2,1,"td",9),l.Pb(),l.Qb(20,14),l.Ac(21,X,3,3,"th",15),l.Ac(22,tt,2,1,"td",9),l.Pb(),l.Qb(23,16),l.Ac(24,et,3,3,"th",17),l.Ac(25,at,2,2,"td",9),l.Pb(),l.Qb(26,18),l.Ac(27,ct,3,3,"th",19),l.Ac(28,ot,21,15,"td",9),l.Pb(),l.Ac(29,rt,1,0,"tr",20),l.Ac(30,it,1,0,"tr",21),l.Rb(),l.Sb(31,"div",22),l.Sb(32,"button",23),l.Bc(33),l.fc(34,"translate"),l.Rb(),l.Nb(35,"mat-paginator",24),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Bb(2),l.Ec("",l.gc(3,9,"Event.Of"),' "',e.roomId.split("_")[0],'" '),l.Bb(6),l.kc("placeholder",l.gc(9,11,"Filter")),l.Bb(2),l.jc("dataSource",e.dataSource),l.Bb(19),l.jc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.jc("matRowDefColumns",e.displayedColumns),l.Bb(3),l.Dc(" ",l.gc(34,13,"Back")," "),l.Bb(2),l.jc("pageSize",10)("pageSizeOptions",l.mc(15,nt)))},directives:[d.c,d.b,d.d,u.c,d.a,f.b,r.j,i.a,r.c,r.e,r.b,r.g,r.i,p.b,o.c,n.a,r.d,i.b,r.a,h.a,r.f,r.h],pipes:[g.c],styles:[""]}),t})();var lt=a("hrfs");const bt=[{path:"",component:N},{path:":id/update",component:F},{path:":id/details",component:G},{path:":id/status",component:st},{path:":id/stats",component:(()=>{class t{constructor(t,e,a){this.eventService=t,this.roomService=e,this.activatedRoute=a,this.chartType="line",this.chartDatasets=[],this.chartLabels=[],this.chartColors=[{backgroundColor:"rgb(246,0,0)",borderColor:"rgb(171,0,0)",borderWidth:2},{backgroundColor:"rgba(145,145,145,0.2)",borderColor:"rgba(81,81,81,0.7)",borderWidth:2},{backgroundColor:"rgb(31,202,0)",borderColor:"rgb(30,122,0)",borderWidth:2}],this.chartOptions={responsive:!0,scales:{yAxes:[{ticks:{min:0,beginAtZero:!0,precision:0}}]}}}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.roomId=t.id,this.roomService.get(this.roomId).subscribe(t=>{this.room=t[0],this.roomService.getEvents(this.room._id).subscribe(t=>{this.events=t,console.log(this.room),this.chartLabels=this.events.map(t=>t.name);const e=this.events.map(t=>(console.log(t),t.seats.split("F").length-1)),a=this.events.map(t=>t.seats.split("T").length-1),c=this.events.map(t=>{const e=t.seats.split("F").length-1,a=t.seats.split("T").length-1;return this.room.capacity-e-a});console.log(e),console.log(a),console.log(c),this.chartDatasets=[{data:c,label:"Occupied"},{data:e,label:"Covid"},{data:a,label:"Free"}]})})})}chartClicked(t){}chartHovered(t){}}return t.\u0275fac=function(e){return new(e||t)(l.Mb(J.a),l.Mb(b.a),l.Mb(o.a))},t.\u0275cmp=l.Gb({type:t,selectors:[["app-room-stats"]],decls:11,vars:8,consts:[["fxLayoutAlign","center start",1,"my-main-page-module"],["fxLayout","column","fxLayoutAlign","center center"],["fxLayoutAlign","center center"],[2,"display","block"],["baseChart","","chartType","bar",3,"datasets","labels","colors","options","legend","chartHover","chartClick"]],template:function(t,e){1&t&&(l.Sb(0,"div",0),l.Sb(1,"mat-card",1),l.Sb(2,"mat-card-header"),l.Sb(3,"mat-card-title"),l.Bc(4),l.fc(5,"uppercase"),l.Rb(),l.Sb(6,"mat-card-subtitle",2),l.Bc(7,"Estad\xedsticas"),l.Rb(),l.Rb(),l.Sb(8,"mat-card-content"),l.Sb(9,"div",3),l.Sb(10,"canvas",4),l.ac("chartHover",(function(t){return e.chartHovered(t)}))("chartClick",(function(t){return e.chartClicked(t)})),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&t&&(l.Bb(4),l.Cc(l.gc(5,6,null==e.room?null:e.room.name)),l.Bb(6),l.jc("datasets",e.chartDatasets)("labels",e.chartLabels)("colors",e.chartColors)("options",e.chartOptions)("legend",!0))},directives:[d.b,M.a,d.c,M.e,M.i,M.h,M.c,lt.a],pipes:[c.s],styles:["mat-card-content[_ngcontent-%COMP%]{min-width:800px;min-height:400px;margin:20px}"]}),t})()},{path:"new",component:F}];let mt=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(bt)],o.f]}),t})();var dt=a("PCNd");let ut=(()=>{class t{}return t.\u0275mod=l.Kb({type:t}),t.\u0275inj=l.Jb({factory:function(e){return new(e||t)},imports:[[c.c,mt,g.b,dt.a,lt.b,I.q]]}),t})()}}]);